<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Placement Simulation Dashboard</title>
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-graduation-cap"></i>
                    <h1>Placement Simulation Dashboard</h1>
                </div>
                <nav class="nav-menu">
                    <button class="nav-btn active" data-section="overview">
                        <i class="fas fa-home"></i> Overview
                    </button>
                    <button class="nav-btn" data-section="students">
                        <i class="fas fa-users"></i> Students
                    </button>
                    <button class="nav-btn" data-section="companies">
                        <i class="fas fa-building"></i> Companies
                    </button>
                    <button class="nav-btn" data-section="results">
                        <i class="fas fa-chart-bar"></i> Results
                    </button>
                    <button class="nav-btn" data-section="configuration">
                        <i class="fas fa-cog"></i> Configuration
                    </button>
                </nav>
                <div class="header-actions">
                    <button class="theme-toggle" id="themeToggle">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        
        <!-- Overview Section -->
        <section id="overview-section" class="content-section active">
            <div class="container">
                <h2 class="section-title">Dashboard Overview</h2>
                
                <!-- Summary Cards -->
                <div class="summary-cards">
                    <div class="card summary-card">
                        <div class="card-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="card-content">
                            <h3>Total Students</h3>
                            <p class="card-value" id="total-students">-</p>
                        </div>
                    </div>
                    
                    <div class="card summary-card">
                        <div class="card-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                            <i class="fas fa-building"></i>
                        </div>
                        <div class="card-content">
                            <h3>Total Companies</h3>
                            <p class="card-value" id="total-companies">-</p>
                        </div>
                    </div>
                    
                    <div class="card summary-card">
                        <div class="card-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="card-content">
                            <h3>Placement Rate</h3>
                            <p class="card-value" id="placement-rate">-%</p>
                        </div>
                    </div>
                    
                    <div class="card summary-card">
                        <div class="card-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                            <i class="fas fa-user-check"></i>
                        </div>
                        <div class="card-content">
                            <h3>Placed Students</h3>
                            <p class="card-value" id="placed-students">-</p>
                        </div>
                    </div>
                    
                    <div class="card summary-card">
                        <div class="card-icon" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="card-content">
                            <h3>Avg CGPA (All)</h3>
                            <p class="card-value" id="avg-cgpa-all">-</p>
                        </div>
                    </div>
                    
                    <div class="card summary-card">
                        <div class="card-icon" style="background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="card-content">
                            <h3>Avg CGPA (Placed)</h3>
                            <p class="card-value" id="avg-cgpa-placed">-</p>
                        </div>
                    </div>
                </div>

                <!-- Charts Grid -->
                <div class="charts-grid">
                    <div class="card chart-card">
                        <h3>Department Distribution</h3>
                        <canvas id="deptDistChart"></canvas>
                    </div>
                    
                    <div class="card chart-card">
                        <h3>CGPA Distribution</h3>
                        <canvas id="cgpaDistChart"></canvas>
                    </div>
                    
                    <div class="card chart-card">
                        <h3>Placement Status</h3>
                        <canvas id="statusChart"></canvas>
                    </div>
                    
                    <div class="card chart-card">
                        <h3>Domain Preferences</h3>
                        <canvas id="domainChart"></canvas>
                    </div>
                    
                    <div class="card chart-card">
                        <h3>Department Hit Rate Analysis</h3>
                        <canvas id="deptHitRateChart"></canvas>
                    </div>
                    
                    <div class="card chart-card">
                        <h3>CGPA Boxplot by Department</h3>
                        <canvas id="cgpaBoxplotChart"></canvas>
                    </div>
                </div>

                <!-- Additional Analytics Row -->
                <div class="charts-grid">
                    <div class="card chart-card">
                        <h3>Companies by Day</h3>
                        <canvas id="companiesByDayChart"></canvas>
                    </div>
                    
                    <div class="card chart-card">
                        <h3>Placement Rate by Department</h3>
                        <canvas id="placementRateChart"></canvas>
                    </div>
                </div>
                
                <!-- Department × Domain Heatmap - Full Width -->
                <div id="deptDomainHeatmap" style="display: flex; justify-content: center; align-items: center; padding: 20px; background: white; border-radius: 12px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); margin-bottom: 20px; min-height: 400px;">
                    <img src="/static/assets/plot_3_department_domain_heatmap.png" alt="Department × Domain Heatmap" style="max-width: 100%; height: auto; object-fit: contain; display: block;">
                </div>
            </div>
        </section>

        <!-- Students Section -->
        <section id="students-section" class="content-section">
            <div class="container">
                <h2 class="section-title">Student Data</h2>
                
                <!-- Filters -->
                <div class="card filters-card">
                    <h3>Filters</h3>
                    <div class="filters-grid">
                        <div class="filter-group">
                            <label>Department</label>
                            <select id="dept-filter" multiple>
                                <!-- Options loaded dynamically -->
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>CGPA Range</label>
                            <div class="range-inputs">
                                <input type="number" id="cgpa-min" placeholder="Min" step="0.1" min="0" max="10">
                                <span>to</span>
                                <input type="number" id="cgpa-max" placeholder="Max" step="0.1" min="0" max="10">
                            </div>
                        </div>
                        <div class="filter-group">
                            <label>Status</label>
                            <select id="status-filter">
                                <option value="">All</option>
                                <option value="Placed">Placed</option>
                                <option value="Unplaced">Unplaced</option>
                                <option value="Opted_Out">Opted Out</option>
                            </select>
                        </div>
                        <div class="filter-actions">
                            <button class="btn btn-primary" id="apply-student-filter">
                                <i class="fas fa-filter"></i> Apply Filters
                            </button>
                            <button class="btn btn-secondary" id="reset-student-filter">
                                <i class="fas fa-redo"></i> Reset
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Students Table -->
                <div class="card table-card">
                    <div class="table-header">
                        <h3>Students List</h3>
                        <div class="table-actions">
                            <input type="text" id="student-search" placeholder="Search students..." class="search-input">
                            <button class="btn btn-sm" id="export-students">
                                <i class="fas fa-download"></i> Export CSV
                            </button>
                        </div>
                    </div>
                    <div class="table-container">
                        <table id="students-table">
                            <thead>
                                <tr>
                                    <th>Roll No</th>
                                    <th>Name</th>
                                    <th>Dept</th>
                                    <th>CGPA</th>
                                    <th>Domain 1</th>
                                    <th>Domain 2</th>
                                    <th>Status</th>
                                    <th>Company</th>
                                </tr>
                            </thead>
                            <tbody id="students-tbody">
                                <!-- Data loaded dynamically -->
                            </tbody>
                        </table>
                    </div>
                    <div class="table-pagination">
                        <button class="btn btn-sm" id="prev-students">
                            <i class="fas fa-chevron-left"></i> Previous
                        </button>
                        <span id="students-page-info">Page 1</span>
                        <button class="btn btn-sm" id="next-students">
                            Next <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>

                <!-- Department-wise Analysis -->
                <div class="charts-grid">
                    <div class="card chart-card">
                        <h3>Department-wise Placement</h3>
                        <canvas id="deptPlacementChart"></canvas>
                    </div>
                    
                    <div class="card chart-card">
                        <h3>CGPA by Department</h3>
                        <canvas id="cgpaByDeptChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Companies Section -->
        <section id="companies-section" class="content-section">
            <div class="container">
                <h2 class="section-title">Company Data</h2>
                
                <!-- Companies Table -->
                <div class="card table-card">
                    <div class="table-header">
                        <h3>Companies List</h3>
                        <div class="table-actions">
                            <input type="text" id="company-search" placeholder="Search companies..." class="search-input">
                        </div>
                    </div>
                    <div class="table-container">
                        <table id="companies-table">
                            <thead>
                                <tr>
                                    <th>Company</th>
                                    <th>Role</th>
                                    <th>Day</th>
                                    <th>Min Hires</th>
                                    <th>Max Hires</th>
                                    <th>Min CGPA</th>
                                    <th>Departments</th>
                                </tr>
                            </thead>
                            <tbody id="companies-tbody">
                                <!-- Data loaded dynamically -->
                            </tbody>
                        </table>
                    </div>
                    <div class="table-pagination">
                        <button class="btn btn-sm" id="prev-companies">
                            <i class="fas fa-chevron-left"></i> Previous
                        </button>
                        <span id="companies-page-info">Page 1</span>
                        <button class="btn btn-sm" id="next-companies">
                            Next <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>

                <!-- Company Analytics -->
                <div class="charts-grid">
                    <div class="card chart-card">
                        <h3>Companies by Role Type</h3>
                        <canvas id="roleTypeChart"></canvas>
                    </div>
                    
                    <div class="card chart-card">
                        <h3>Companies by Day</h3>
                        <canvas id="companyDayChart"></canvas>
                    </div>
                    
                    <div class="card chart-card">
                        <h3>Hiring Capacity Distribution</h3>
                        <canvas id="capacityChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Results Section -->
        <section id="results-section" class="content-section">
            <div class="container">
                <h2 class="section-title">Simulation Results</h2>
                
                <div id="no-results" class="empty-state">
                    <i class="fas fa-chart-line"></i>
                    <h3>No Results Available</h3>
                    <p>Run a simulation from the Configuration tab to see results here.</p>
                    <button class="btn btn-primary" onclick="showSection('configuration')">
                        Go to Configuration
                    </button>
                </div>

                <div id="results-content" style="display: none;">
                    <!-- Results Summary -->
                    <div class="summary-cards">
                        <div class="card summary-card">
                            <div class="card-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                <i class="fas fa-users-cog"></i>
                            </div>
                            <div class="card-content">
                                <h3>Total Placed</h3>
                                <p class="card-value" id="result-placed">-</p>
                            </div>
                        </div>
                        
                        <div class="card summary-card">
                            <div class="card-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                                <i class="fas fa-percentage"></i>
                            </div>
                            <div class="card-content">
                                <h3>Success Rate</h3>
                                <p class="card-value" id="result-rate">-%</p>
                            </div>
                        </div>
                        
                        <div class="card summary-card">
                            <div class="card-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                                <i class="fas fa-building"></i>
                            </div>
                            <div class="card-content">
                                <h3>Companies Hired</h3>
                                <p class="card-value" id="result-companies">-</p>
                            </div>
                        </div>
                        
                        <div class="card summary-card">
                            <div class="card-icon" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                                <i class="fas fa-chart-bar"></i>
                            </div>
                            <div class="card-content">
                                <h3>Avg per Company</h3>
                                <p class="card-value" id="result-avg">-</p>
                            </div>
                        </div>
                    </div>

                    <!-- Results Charts -->
                    <div class="charts-grid">
                        <div class="card chart-card">
                            <h3>Department-wise Placements</h3>
                            <canvas id="resultDeptChart"></canvas>
                        </div>
                        
                        <div class="card chart-card">
                            <h3>Company-wise Hiring</h3>
                            <canvas id="resultCompanyChart"></canvas>
                        </div>
                        
                        <div class="card chart-card">
                            <h3>CGPA Comparison</h3>
                            <canvas id="resultCgpaChart"></canvas>
                        </div>
                        
                        <div class="card chart-card">
                            <h3>Placement by Role Type</h3>
                            <canvas id="resultRoleChart"></canvas>
                        </div>
                    </div>

                    <!-- Top Performers -->
                    <div class="card">
                        <h3>Top Recruiting Companies</h3>
                        <div class="table-container">
                            <table id="top-companies-table">
                                <thead>
                                    <tr>
                                        <th>Rank</th>
                                        <th>Company</th>
                                        <th>Role</th>
                                        <th>Hired</th>
                                        <th>Min Required</th>
                                        <th>Max Capacity</th>
                                        <th>Utilization</th>
                                    </tr>
                                </thead>
                                <tbody id="top-companies-tbody">
                                    <!-- Data loaded dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Configuration Section -->
        <section id="configuration-section" class="content-section">
            <div class="container">
                <h2 class="section-title">Simulation Configuration</h2>
                
                <div class="config-grid">
                    <!-- Score Weights -->
                    <div class="card config-card">
                        <h3><i class="fas fa-sliders-h"></i> Profile Score Weights</h3>
                        <div class="config-group">
                            <label>CGPA Weight (w1): <span id="w1-value">0.3</span></label>
                            <input type="range" id="w1-cgpa" min="0" max="1" step="0.1" value="0.3" class="slider">
                        </div>
                        <div class="config-group">
                            <label>Skill Match Weight (w2): <span id="w2-value">0.2</span></label>
                            <input type="range" id="w2-skill" min="0" max="1" step="0.1" value="0.2" class="slider">
                        </div>
                        <div class="config-group">
                            <label>Random Factor Weight (w3): <span id="w3-value">0.2</span></label>
                            <input type="range" id="w3-random" min="0" max="1" step="0.1" value="0.2" class="slider">
                        </div>
                        <div class="config-group">
                            <label>Department Score Weight (w4): <span id="w4-value">0.3</span></label>
                            <input type="range" id="w4-dep" min="0" max="1" step="0.1" value="0.3" class="slider">
                        </div>
                    </div>

                    <!-- Interview Score Weights -->
                    <div class="card config-card">
                        <h3><i class="fas fa-user-tie"></i> Interview Score Weights</h3>
                        <div class="config-group">
                            <label>Profile Score Weight (w5): <span id="w5-value">0.3</span></label>
                            <input type="range" id="w5-profile" min="0" max="1" step="0.1" value="0.3" class="slider">
                        </div>
                        <div class="config-group">
                            <label>CGPA Weight (w6): <span id="w6-value">0.5</span></label>
                            <input type="range" id="w6-cgpa" min="0" max="1" step="0.1" value="0.5" class="slider">
                        </div>
                        <div class="config-group">
                            <label>Random Factor Weight (w7): <span id="w7-value">0.2</span></label>
                            <input type="range" id="w7-random" min="0" max="1" step="0.1" value="0.2" class="slider">
                        </div>
                    </div>

                    <!-- Simulation Parameters -->
                    <div class="card config-card">
                        <h3><i class="fas fa-cogs"></i> Simulation Parameters</h3>
                        <div class="config-group">
                            <label>Opt-out Probability: <span id="opt-value">0.05</span></label>
                            <input type="range" id="p-opt-out" min="0" max="0.2" step="0.01" value="0.05" class="slider">
                        </div>
                        <div class="config-group">
                            <label>Random Seed:</label>
                            <input type="number" id="random-seed" value="42" class="config-input">
                        </div>
                        <div class="config-group">
                            <label>Over-offer Multiplier: <span id="multiplier-value">1.5</span></label>
                            <input type="range" id="over-offer" min="1" max="2" step="0.1" value="1.5" class="slider">
                        </div>
                    </div>

                    <!-- Options -->
                    <div class="card config-card">
                        <h3><i class="fas fa-toggle-on"></i> Options</h3>
                        <div class="config-group">
                            <label class="toggle-label">
                                <input type="checkbox" id="use-dep-score" checked>
                                <span>Use Department Score</span>
                            </label>
                        </div>
                        <div class="config-group">
                            <label class="toggle-label">
                                <input type="checkbox" id="enforce-min" checked>
                                <span>Enforce Minimum Hires</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Run Simulation -->
                <div class="card run-simulation-card">
                    <div class="run-simulation-content">
                        <div class="run-info">
                            <h3><i class="fas fa-play-circle"></i> Run Simulation</h3>
                            <p>Click the button below to start the placement simulation with the configured parameters.</p>
                        </div>
                        <div class="run-actions">
                            <button class="btn btn-secondary" id="reset-config">
                                <i class="fas fa-undo"></i> Reset to Default
                            </button>
                            <button class="btn btn-primary btn-lg" id="run-simulation">
                                <i class="fas fa-rocket"></i> Run Simulation
                            </button>
                        </div>
                    </div>
                    
                    <!-- Progress -->
                    <div id="simulation-progress" style="display: none;">
                        <div class="progress-info">
                            <span id="progress-message">Initializing...</span>
                            <span id="progress-percent">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Placement Simulation Dashboard. All rights reserved.</p>
        </div>
    </footer>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Loading...</p>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <script src="/static/js/app.js"></script>
</body>
</html>
